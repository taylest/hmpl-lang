import{_ as p}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,d as a,k as n,l,m as o,a as t,n as r,o as c}from"./app-CRWUjIol.js";const d={};function u(y,s){const e=r("RouteLink");return c(),i("div",null,[s[58]||(s[58]=a("h1",{id:"hmpl",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#hmpl"},[a("span",null,"hmpl")])],-1)),s[59]||(s[59]=a("p",null,"The main object of the entire module. It includes all the properties and methods that help you work with the server.",-1)),s[60]||(s[60]=a("p",null,"This object does not need to be imported. It is assigned to the entire document, so you can immediately use it in your code.",-1)),s[61]||(s[61]=a("h2",{id:"compile",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#compile"},[a("span",null,"compile")])],-1)),a("p",null,[s[1]||(s[1]=n("The ")),s[2]||(s[2]=a("code",null,"compile",-1)),s[3]||(s[3]=n(" function takes as its first argument a string that represents the extended HTML syntax with the request objects passed to it (more simply, the hmpl syntax), and as its second argument it takes the ")),l(e,{to:"/types.html#hmplcompileoptions"},{default:o(()=>s[0]||(s[0]=[n("HMPLCompileOptions")])),_:1}),s[4]||(s[4]=n(" options object."))]),s[62]||(s[62]=t(`<div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#ffffff;color:#24292eff;"><pre class="shiki min-light vp-code"><code><span class="line"><span style="color:#D32F2F;">const</span><span style="color:#1976D2;"> templateFn</span><span style="color:#D32F2F;"> =</span><span style="color:#1976D2;"> hmpl</span><span style="color:#6F42C1;">.compile</span><span style="color:#24292EFF;">(</span></span>
<span class="line"><span style="color:#22863A;">  \`{ </span></span>
<span class="line"><span style="color:#22863A;">     {</span></span>
<span class="line"><span style="color:#22863A;">       &quot;src&quot;:&quot;/api/test&quot; </span></span>
<span class="line"><span style="color:#22863A;">     } </span></span>
<span class="line"><span style="color:#22863A;">   }\`</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  {</span></span>
<span class="line"><span style="color:#24292EFF;">    memo</span><span style="color:#D32F2F;">:</span><span style="color:#1976D2;"> true</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">    autoBody</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">      formData</span><span style="color:#D32F2F;">:</span><span style="color:#1976D2;"> true</span></span>
<span class="line"><span style="color:#24292EFF;">    }</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="options" tabindex="-1"><a class="header-anchor" href="#options"><span>Options</span></a></h3>`,2)),a("p",null,[s[6]||(s[6]=n("Sets options for all request objects coming from the ")),l(e,{to:"/types.html#hmpltemplatefunction"},{default:o(()=>s[5]||(s[5]=[n("HMPLTemplateFunction")])),_:1}),s[7]||(s[7]=n(" generated by the current ")),s[8]||(s[8]=a("code",null,"compile",-1)),s[9]||(s[9]=n(" function."))]),s[63]||(s[63]=a("h4",{id:"memo",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#memo"},[a("span",null,"memo")])],-1)),a("p",null,[s[11]||(s[11]=n("Specifies memoization for all request objects that match the condition described in the request ")),l(e,{to:"/request.html#memo"},{default:o(()=>s[10]||(s[10]=[n("memo")])),_:1}),s[12]||(s[12]=n("."))]),s[64]||(s[64]=t(`<div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#ffffff;color:#24292eff;"><pre class="shiki min-light vp-code"><code><span class="line"><span style="color:#24292EFF;">{</span></span>
<span class="line"><span style="color:#24292EFF;">  memo</span><span style="color:#212121;">:</span><span style="color:#1976D2;"> true</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>By default, the value is <code>false</code>.</p><h3 id="autobody" tabindex="-1"><a class="header-anchor" href="#autobody"><span>autoBody</span></a></h3>`,3)),a("p",null,[s[15]||(s[15]=n("Specifies a value for automatic generation of the request body for all request objects. Can be a Boolean value and an options object of type ")),l(e,{to:"/types.html#hmplautobodyoptions"},{default:o(()=>s[13]||(s[13]=[n("HMPLAutoBodyOptions")])),_:1}),s[16]||(s[16]=n(". Associated with ")),l(e,{to:"/request.html#autobody"},{default:o(()=>s[14]||(s[14]=[n("autoBody")])),_:1}),s[17]||(s[17]=n(" for the request object."))]),s[65]||(s[65]=t(`<div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#ffffff;color:#24292eff;"><pre class="shiki min-light vp-code"><code><span class="line"><span style="color:#24292EFF;">{</span></span>
<span class="line"><span style="color:#24292EFF;">  autoBody</span><span style="color:#212121;">:</span><span style="color:#1976D2;"> true</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>or</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#ffffff;color:#24292eff;"><pre class="shiki min-light vp-code"><code><span class="line"><span style="color:#24292EFF;">{</span></span>
<span class="line"><span style="color:#24292EFF;">  autoBody</span><span style="color:#212121;">:</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    formData</span><span style="color:#212121;">:</span><span style="color:#1976D2;"> true</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>By default, the value is <code>false</code>.</p><h3 id="requestinit" tabindex="-1"><a class="header-anchor" href="#requestinit"><span>RequestInit</span></a></h3>`,5)),a("p",null,[s[21]||(s[21]=a("code",null,"compile",-1)),s[22]||(s[22]=n(" returns a ")),l(e,{to:"/types.html#hmpltemplatefunction"},{default:o(()=>s[18]||(s[18]=[n("template function")])),_:1}),s[23]||(s[23]=n(" that takes as arguments an object of type ")),l(e,{to:"/types.html#hmplrequestinit"},{default:o(()=>s[19]||(s[19]=[n("HMPLRequestInit")])),_:1}),s[24]||(s[24]=n(", which initializes a dictionary with request options, or an array of objects of type ")),l(e,{to:"/types.html#hmplidentificationrequestinit"},{default:o(()=>s[20]||(s[20]=[n("HMPLIdentificationRequestInit")])),_:1}),s[25]||(s[25]=n(", which is essentially the same dictionary, but with an ")),s[26]||(s[26]=a("code",null,"id",-1)),s[27]||(s[27]=n(" for binding to specific requests or the ")),s[28]||(s[28]=a("a",{href:"#requestinit-function"},"HMPLRequestInitFunction",-1)),s[29]||(s[29]=n(" function."))]),s[66]||(s[66]=t(`<div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#ffffff;color:#24292eff;"><pre class="shiki min-light vp-code"><code><span class="line"><span style="color:#D32F2F;">const</span><span style="color:#1976D2;"> elementObj</span><span style="color:#D32F2F;"> =</span><span style="color:#6F42C1;"> templateFn</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">  mode</span><span style="color:#D32F2F;">:</span><span style="color:#22863A;"> &quot;cors&quot;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  cache</span><span style="color:#D32F2F;">:</span><span style="color:#22863A;"> &quot;no-cache&quot;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  credentials</span><span style="color:#D32F2F;">:</span><span style="color:#22863A;"> &quot;same-origin&quot;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  headers</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#22863A;">    &quot;Content-Type&quot;</span><span style="color:#D32F2F;">:</span><span style="color:#22863A;"> &quot;text/html&quot;</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  redirect</span><span style="color:#D32F2F;">:</span><span style="color:#22863A;"> &quot;follow&quot;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#6F42C1;">  get</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> (prop</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> value) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {}</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  referrerPolicy</span><span style="color:#D32F2F;">:</span><span style="color:#22863A;"> &quot;no-referrer&quot;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  body</span><span style="color:#D32F2F;">:</span><span style="color:#1976D2;"> JSON</span><span style="color:#6F42C1;">.stringify</span><span style="color:#24292EFF;">(data)</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  signal</span><span style="color:#D32F2F;">:</span><span style="color:#D32F2F;"> new</span><span style="color:#6F42C1;"> AbortController</span><span style="color:#24292EFF;">().signal</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  integrity</span><span style="color:#D32F2F;">:</span><span style="color:#22863A;"> &quot;...&quot;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  window</span><span style="color:#D32F2F;">:</span><span style="color:#1976D2;"> null</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  refferer</span><span style="color:#D32F2F;">:</span><span style="color:#22863A;"> &quot;about:client&quot;</span></span>
<span class="line"><span style="color:#24292EFF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="identification-requestinit" tabindex="-1"><a class="header-anchor" href="#identification-requestinit"><span>Identification RequestInit</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#ffffff;color:#24292eff;"><pre class="shiki min-light vp-code"><code><span class="line"><span style="color:#D32F2F;">const</span><span style="color:#1976D2;"> elementObj</span><span style="color:#D32F2F;"> =</span><span style="color:#6F42C1;"> templateFn</span><span style="color:#24292EFF;">([</span></span>
<span class="line"><span style="color:#24292EFF;">  {</span></span>
<span class="line"><span style="color:#24292EFF;">    id</span><span style="color:#D32F2F;">:</span><span style="color:#22863A;"> &quot;1&quot;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">    value</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">      mode</span><span style="color:#D32F2F;">:</span><span style="color:#22863A;"> &quot;cors&quot;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">      cache</span><span style="color:#D32F2F;">:</span><span style="color:#22863A;"> &quot;no-cache&quot;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">      credentials</span><span style="color:#D32F2F;">:</span><span style="color:#22863A;"> &quot;same-origin&quot;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">      headers</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#22863A;">        &quot;Content-Type&quot;</span><span style="color:#D32F2F;">:</span><span style="color:#22863A;"> &quot;text/html&quot;</span></span>
<span class="line"><span style="color:#24292EFF;">      }</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">      redirect</span><span style="color:#D32F2F;">:</span><span style="color:#22863A;"> &quot;follow&quot;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#6F42C1;">      get</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> (prop</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> value) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {}</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">      referrerPolicy</span><span style="color:#D32F2F;">:</span><span style="color:#22863A;"> &quot;no-referrer&quot;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">      body</span><span style="color:#D32F2F;">:</span><span style="color:#1976D2;"> JSON</span><span style="color:#6F42C1;">.stringify</span><span style="color:#24292EFF;">(data)</span></span>
<span class="line"><span style="color:#24292EFF;">    }</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">]);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>It is worth considering that if an array is passed, then if the <code>initId</code> property is not specified, the request will be sent without a options object</p></blockquote><p>The <code>id</code> value of each options identification object is unique. The property value is a <code>string</code> or a <code>number</code>.</p><p>The function returns an object that depends on the template string to determine the number of properties. If there are 2 or more request objects in the template string, then the <code>requests</code> property is added, which has the value of an array of objects for each request object. Their properties are copied as if there was one request object in the template string.</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#ffffff;color:#24292eff;"><pre class="shiki min-light vp-code"><code><span class="line"><span style="color:#D32F2F;">const</span><span style="color:#1976D2;"> templateFn</span><span style="color:#D32F2F;"> =</span><span style="color:#1976D2;"> hmpl</span><span style="color:#6F42C1;">.compile</span><span style="color:#24292EFF;">(</span></span>
<span class="line"><span style="color:#22863A;">  \`{ </span></span>
<span class="line"><span style="color:#22863A;">     {</span></span>
<span class="line"><span style="color:#22863A;">       &quot;src&quot;:&quot;/api/test&quot; </span></span>
<span class="line"><span style="color:#22863A;">     } </span></span>
<span class="line"><span style="color:#22863A;">   }\`</span></span>
<span class="line"><span style="color:#24292EFF;">);</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#1976D2;"> elementObj</span><span style="color:#D32F2F;"> =</span><span style="color:#6F42C1;"> templateFn</span><span style="color:#24292EFF;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>result:</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#ffffff;color:#24292eff;"><pre class="shiki min-light vp-code"><code><span class="line"><span style="color:#24292EFF;">{</span></span>
<span class="line"><span style="color:#24292EFF;">  status</span><span style="color:#212121;">:</span><span style="color:#1976D2;"> 200</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  response</span><span style="color:#212121;">:</span><span style="color:#24292EFF;"> template</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>or</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#ffffff;color:#24292eff;"><pre class="shiki min-light vp-code"><code><span class="line"><span style="color:#D32F2F;">const</span><span style="color:#1976D2;"> templateFn</span><span style="color:#D32F2F;"> =</span><span style="color:#1976D2;"> hmpl</span><span style="color:#6F42C1;">.compile</span><span style="color:#24292EFF;">(</span></span>
<span class="line"><span style="color:#22863A;">  \`&lt;div&gt;</span></span>
<span class="line"><span style="color:#22863A;">   {</span></span>
<span class="line"><span style="color:#22863A;">     {</span></span>
<span class="line"><span style="color:#22863A;">       &quot;src&quot;:&quot;/api/test&quot;</span></span>
<span class="line"><span style="color:#22863A;">     }</span></span>
<span class="line"><span style="color:#22863A;">   }</span></span>
<span class="line"><span style="color:#22863A;">   {</span></span>
<span class="line"><span style="color:#22863A;">     {</span></span>
<span class="line"><span style="color:#22863A;">       &quot;src&quot;:&quot;/api/test&quot;</span></span>
<span class="line"><span style="color:#22863A;">     }</span></span>
<span class="line"><span style="color:#22863A;">   }</span></span>
<span class="line"><span style="color:#22863A;">&lt;/div&gt;\`</span></span>
<span class="line"><span style="color:#24292EFF;">);</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#1976D2;"> elementObj</span><span style="color:#D32F2F;"> =</span><span style="color:#6F42C1;"> templateFn</span><span style="color:#24292EFF;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>result:</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#ffffff;color:#24292eff;"><pre class="shiki min-light vp-code"><code><span class="line"><span style="color:#24292EFF;">{</span></span>
<span class="line"><span style="color:#24292EFF;">  response</span><span style="color:#212121;">:</span><span style="color:#24292EFF;"> div</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  requests</span><span style="color:#212121;">:</span><span style="color:#24292EFF;"> [</span></span>
<span class="line"><span style="color:#24292EFF;">    {</span></span>
<span class="line"><span style="color:#24292EFF;">      status</span><span style="color:#D32F2F;">:</span><span style="color:#1976D2;"> 200</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">      response</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> template</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">    }</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">    {</span></span>
<span class="line"><span style="color:#24292EFF;">      status</span><span style="color:#D32F2F;">:</span><span style="color:#1976D2;"> 200</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">      response</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> template</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">    }</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  ]</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">};</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>response</code> that is generated for the <code>element</code> will not contain a <code>template</code> tag, but an array with <code>ChildNode</code>&#39;s, because these nodes have already been rendered into the DOM from the template string.</p><p>Values are dynamically assigned to the object depending on the server response.</p><blockquote><p>The status changes depending on the server response. But, the most important thing is that it is not assigned several times if it is the same. When working with <code>Proxy</code> or <code>Object.defineProperty</code> or <code>get</code> or something like that, this will not give the object unnecessary updates!</p></blockquote><h3 id="requestinit-function" tabindex="-1"><a class="header-anchor" href="#requestinit-function"><span>RequestInit function</span></a></h3>`,17)),a("p",null,[s[33]||(s[33]=n("In order to work with the ")),s[34]||(s[34]=a("a",{href:"#concept-of-context"},"context",-1)),s[35]||(s[35]=n(", the new version introduced the ")),l(e,{to:"/types.html#hmplrequestinitfunction"},{default:o(()=>s[30]||(s[30]=[n("HMPLRequestInitFunction")])),_:1}),s[36]||(s[36]=n(" function. It takes as an argument the ")),l(e,{to:"/types.html#hmplinstancecontext"},{default:o(()=>s[31]||(s[31]=[n("HMPLInstanceContext")])),_:1}),s[37]||(s[37]=n(" object. Returns ")),l(e,{to:"/types.html#hmplrequestinit"},{default:o(()=>s[32]||(s[32]=[n("HMPLRequestInit")])),_:1}),s[38]||(s[38]=n("."))]),s[67]||(s[67]=t(`<div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#ffffff;color:#24292eff;"><pre class="shiki min-light vp-code"><code><span class="line"><span style="color:#D32F2F;">const</span><span style="color:#1976D2;"> elementObj</span><span style="color:#D32F2F;"> =</span><span style="color:#6F42C1;"> templateFn</span><span style="color:#24292EFF;">(({</span></span>
<span class="line"><span style="color:#24292EFF;">  request</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> { event }</span></span>
<span class="line"><span style="color:#24292EFF;">})</span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;">{</span></span>
<span class="line"><span style="color:#24292EFF;">  {</span></span>
<span class="line"><span style="color:#24292EFF;">      mode</span><span style="color:#212121;">:</span><span style="color:#22863A;"> &quot;cors&quot;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">      cache</span><span style="color:#212121;">:</span><span style="color:#22863A;"> &quot;no-cache&quot;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">      credentials</span><span style="color:#212121;">:</span><span style="color:#22863A;"> &quot;same-origin&quot;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">      headers</span><span style="color:#212121;">:</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#22863A;">        &quot;Content-Type&quot;</span><span style="color:#24292EFF;">: </span><span style="color:#22863A;">&quot;text/html&quot;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">      }</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">      redirect</span><span style="color:#212121;">:</span><span style="color:#22863A;"> &quot;follow&quot;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">      get</span><span style="color:#212121;">:</span><span style="color:#24292EFF;"> (prop</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> value) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {}</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">      referrerPolicy</span><span style="color:#212121;">:</span><span style="color:#22863A;"> &quot;no-referrer&quot;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">      body</span><span style="color:#212121;">:</span><span style="color:#D32F2F;"> new</span><span style="color:#6F42C1;"> FormatData</span><span style="color:#24292EFF;">(</span><span style="color:#1976D2;">event</span><span style="color:#24292EFF;">.target</span><span style="color:#212121;">,</span><span style="color:#1976D2;"> event</span><span style="color:#24292EFF;">.submitter)</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">    }</span></span>
<span class="line"><span style="color:#24292EFF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Also, the function value can be used as a <code>value</code> for the identification RequestInit.</p><h4 id="get" tabindex="-1"><a class="header-anchor" href="#get"><span>get</span></a></h4><p>The get property takes the value of a function that fires every time one of the properties is updated.</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#ffffff;color:#24292eff;"><pre class="shiki min-light vp-code"><code><span class="line"><span style="color:#D32F2F;">const</span><span style="color:#1976D2;"> elementObj</span><span style="color:#D32F2F;"> =</span><span style="color:#6F42C1;"> templateFn</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#6F42C1;">  get</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> (prop</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> value</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> requestObject) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#D32F2F;">    switch</span><span style="color:#24292EFF;"> (prop) {</span></span>
<span class="line"><span style="color:#D32F2F;">      case</span><span style="color:#22863A;"> &quot;response&quot;</span><span style="color:#24292EFF;">:</span></span>
<span class="line"><span style="color:#D32F2F;">        if</span><span style="color:#24292EFF;"> (</span><span style="color:#D32F2F;">!</span><span style="color:#24292EFF;">requestObject) </span><span style="color:#1976D2;">console</span><span style="color:#6F42C1;">.log</span><span style="color:#24292EFF;">(requestObject);</span></span>
<span class="line"><span style="color:#1976D2;">        console</span><span style="color:#6F42C1;">.log</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&quot;Response:&quot;</span><span style="color:#24292EFF;">);</span></span>
<span class="line"><span style="color:#1976D2;">        console</span><span style="color:#6F42C1;">.log</span><span style="color:#24292EFF;">(value);</span></span>
<span class="line"><span style="color:#D32F2F;">        break</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#D32F2F;">      case</span><span style="color:#22863A;"> &quot;status&quot;</span><span style="color:#24292EFF;">:</span></span>
<span class="line"><span style="color:#1976D2;">        console</span><span style="color:#6F42C1;">.log</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&quot;Status:&quot;</span><span style="color:#24292EFF;">);</span></span>
<span class="line"><span style="color:#1976D2;">        console</span><span style="color:#6F42C1;">.log</span><span style="color:#24292EFF;">(value);</span></span>
<span class="line"><span style="color:#D32F2F;">        break</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">    }</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It is worth noting that the <code>requests</code> property is not called when the value changes, because the function is called when the values ​​in this property change only for array elements. This is a debatable thing, but it may not be necessary to call this function when a specific property of an object is called.</p><p>Also, to work with <code>async</code> <code>await</code> you can use a similar construct that uses a vanilla <code>Promise</code> object:</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#ffffff;color:#24292eff;"><pre class="shiki min-light vp-code"><code><span class="line"><span style="color:#D32F2F;">const</span><span style="color:#1976D2;"> val</span><span style="color:#D32F2F;"> =</span><span style="color:#D32F2F;"> await</span><span style="color:#D32F2F;"> new</span><span style="color:#1976D2;"> Promise</span><span style="color:#24292EFF;">((res</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> rej) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#6F42C1;">  templateFn</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#6F42C1;">    get</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> (prop</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> value</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> requestObject) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#D32F2F;">      switch</span><span style="color:#24292EFF;"> (prop) {</span></span>
<span class="line"><span style="color:#D32F2F;">        case</span><span style="color:#22863A;"> &quot;response&quot;</span><span style="color:#24292EFF;">:</span></span>
<span class="line"><span style="color:#D32F2F;">          if</span><span style="color:#24292EFF;"> (</span><span style="color:#D32F2F;">!</span><span style="color:#24292EFF;">value) </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#6F42C1;">          res</span><span style="color:#24292EFF;">(value);</span></span>
<span class="line"><span style="color:#D32F2F;">          break</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">      }</span></span>
<span class="line"><span style="color:#24292EFF;">    }</span></span>
<span class="line"><span style="color:#24292EFF;">  });</span></span>
<span class="line"><span style="color:#24292EFF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This is described in more detail in the blog in <a href="https://blog.hmpl-lang.dev/blog/2024/11/25/asynchronicity-async-await-support-when-working-with-hmpl.html" target="_blank" rel="noopener noreferrer">this article</a>.</p><h2 id="stringify" tabindex="-1"><a class="header-anchor" href="#stringify"><span>stringify</span></a></h2>`,10)),a("p",null,[s[40]||(s[40]=n("This function accepts an object of type ")),l(e,{to:"/types.html#hmplrequestinfo"},{default:o(()=>s[39]||(s[39]=[n("HMPLRequestInfo")])),_:1}),s[41]||(s[41]=n(" with request data and returns a string request object."))]),s[68]||(s[68]=t('<div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#ffffff;color:#24292eff;"><pre class="shiki min-light vp-code"><code><span class="line"><span style="color:#D32F2F;">const</span><span style="color:#1976D2;"> request</span><span style="color:#D32F2F;"> =</span><span style="color:#1976D2;"> hmpl</span><span style="color:#6F42C1;">.stringify</span><span style="color:#24292EFF;">({</span></span>\n<span class="line"><span style="color:#24292EFF;">  src</span><span style="color:#D32F2F;">:</span><span style="color:#22863A;"> &quot;/api/test&quot;</span></span>\n<span class="line"><span style="color:#24292EFF;">});</span></span>\n<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#1976D2;"> templateFn</span><span style="color:#D32F2F;"> =</span><span style="color:#1976D2;"> hmpl</span><span style="color:#6F42C1;">.compile</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">`{</span><span style="color:#D32F2F;">${</span><span style="color:#24292EFF;">request</span><span style="color:#D32F2F;">}</span><span style="color:#22863A;">}`</span><span style="color:#24292EFF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It is based on <code>JSON.stringify</code>.</p><h2 id="concept-of-context" tabindex="-1"><a class="header-anchor" href="#concept-of-context"><span>Concept of context</span></a></h2><p>In hmpl, the concept of context is introduced for transferring data in instances. In itself, it represents a certain environment with data from which you can get, but not yet write, a value.</p>',4)),a("p",null,[s[44]||(s[44]=n("So far, one context has been introduced - this is the instance context. Its type is ")),l(e,{to:"/types.html#hmplinstancecontext"},{default:o(()=>s[42]||(s[42]=[n("HMPLInstanceContext")])),_:1}),s[45]||(s[45]=n(". It includes the request context ")),l(e,{to:"/types.html#hmplrequestcontext"},{default:o(()=>s[43]||(s[43]=[n("HMPLRequestContext")])),_:1}),s[46]||(s[46]=n(", which is generated when sending a request to the server."))]),s[69]||(s[69]=t(`<div class="language-hmpl line-numbers-mode" data-highlighter="shiki" data-ext="hmpl" data-title="hmpl" style="background-color:#ffffff;color:#24292eff;"><pre class="shiki min-light vp-code"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">button</span><span style="color:#6F42C1;"> id</span><span style="color:#D32F2F;">=</span><span style="color:#22863A;">&quot;getHTML&quot;</span><span style="color:#24292EFF;">&gt;Get HTML!&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  {{ &quot;src&quot;:&quot;/api/getHTML&quot;, method:&quot;POST&quot;, after:&quot;click:#getHTML&quot; }}</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#ffffff;color:#24292eff;"><pre class="shiki min-light vp-code"><code><span class="line"><span style="color:#C2C3C5;">/**</span></span>
<span class="line"><span style="color:#C2C3C5;"> * ctx = {</span></span>
<span class="line"><span style="color:#C2C3C5;"> *   request: {</span></span>
<span class="line"><span style="color:#C2C3C5;"> *     event: PointerEvent,</span></span>
<span class="line"><span style="color:#C2C3C5;"> *   },</span></span>
<span class="line"><span style="color:#C2C3C5;"> * };</span></span>
<span class="line"><span style="color:#C2C3C5;"> */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#6F42C1;"> initFn</span><span style="color:#D32F2F;"> =</span><span style="color:#24292EFF;"> (ctx) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#D32F2F;">  const</span><span style="color:#1976D2;"> event</span><span style="color:#D32F2F;"> =</span><span style="color:#1976D2;"> ctx</span><span style="color:#24292EFF;">.</span><span style="color:#1976D2;">request</span><span style="color:#24292EFF;">.event;</span></span>
<span class="line"><span style="color:#D32F2F;">  const</span><span style="color:#1976D2;"> text</span><span style="color:#D32F2F;"> =</span><span style="color:#1976D2;"> event</span><span style="color:#24292EFF;">.</span><span style="color:#1976D2;">target</span><span style="color:#24292EFF;">.textContent;</span></span>
<span class="line"><span style="color:#D32F2F;">  return</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    body</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> text</span></span>
<span class="line"><span style="color:#24292EFF;">  };</span></span>
<span class="line"><span style="color:#24292EFF;">};</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#1976D2;"> elementObj</span><span style="color:#D32F2F;"> =</span><span style="color:#6F42C1;"> templateFn</span><span style="color:#24292EFF;">(initFn);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2)),a("p",null,[s[48]||(s[48]=n("In this example, thanks to the context, we get an event that is triggered when the ")),s[49]||(s[49]=a("code",null,"button",-1)),s[50]||(s[50]=n(" is clicked. This is a very useful feature, because for things like ")),s[51]||(s[51]=a("code",null,"FormData",-1)),s[52]||(s[52]=n(", or ")),s[53]||(s[53]=a("code",null,"value",-1)),s[54]||(s[54]=n(" for ")),s[55]||(s[55]=a("code",null,"input",-1)),s[56]||(s[56]=n(", you can now generate a custom ")),l(e,{to:"/types.html#hmplrequestinit"},{default:o(()=>s[47]||(s[47]=[n("HMPLRequestInit")])),_:1}),s[57]||(s[57]=n("."))])])}const m=p(d,[["render",u],["__file","hmpl.html.vue"]]),b=JSON.parse('{"path":"/hmpl.html","title":"hmpl","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"compile","slug":"compile","link":"#compile","children":[{"level":3,"title":"Options","slug":"options","link":"#options","children":[]},{"level":3,"title":"autoBody","slug":"autobody","link":"#autobody","children":[]},{"level":3,"title":"RequestInit","slug":"requestinit","link":"#requestinit","children":[]},{"level":3,"title":"Identification RequestInit","slug":"identification-requestinit","link":"#identification-requestinit","children":[]},{"level":3,"title":"RequestInit function","slug":"requestinit-function","link":"#requestinit-function","children":[]}]},{"level":2,"title":"stringify","slug":"stringify","link":"#stringify","children":[]},{"level":2,"title":"Concept of context","slug":"concept-of-context","link":"#concept-of-context","children":[]}],"git":{},"readingTime":{"minutes":3.37,"words":1012},"filePathRelative":"hmpl.md"}');export{m as comp,b as data};
